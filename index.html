<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Store Accounting System</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Store Accounting System</h1>
            <div id="auth-section">
                <div id="user-info" class="hidden">
                    <span id="user-name"></span>
                    <span id="user-role"></span>
                </div>
                <button id="login-btn">Login</button>
                <button id="logout-btn" style="display:none;">Logout</button>
            </div>
        </header>

        <main>
            <!-- Dashboard Section -->
            <section id="dashboard" class="hidden">
                <h2>Dashboard</h2>
                <div id="inventory-alerts" class="alert-container hidden">
                    <h3>Inventory Alerts</h3>
                    <div id="alerts-list"></div>
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Total Sales</h3>
                        <p id="total-sales">$0.00</p>
                    </div>
                    <div class="stat-card">
                        <h3>Total Expenses</h3>
                        <p id="total-expenses">$0.00</p>
                    </div>
                    <div class="stat-card">
                        <h3>Net Profit</h3>
                        <p id="net-profit">$0.00</p>
                    </div>
                    <div class="stat-card">
                        <h3>Tax Collected</h3>
                        <p id="tax-collected">$0.00</p>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="sales-chart"></canvas>
                </div>
            </section>

            <!-- Products Section -->
            <section id="products" class="hidden">
                <h2>Products</h2>
                <form id="product-form">
                    <input type="text" id="product-name" placeholder="Product Name" required>
                    <input type="number" id="product-price" placeholder="Price" step="0.01" required>
                    <input type="number" id="product-stock" placeholder="Stock" required>
                    <input type="number" id="product-threshold" placeholder="Low Stock Threshold" step="1" required>
                    <button type="submit">Add Product</button>
                </form>
                <div id="products-list"></div>
            </section>

            <!-- Sales Section -->
            <section id="sales" class="hidden">
                <h2>Sales</h2>
                <form id="sale-form">
                    <select id="sale-product" required></select>
                    <select id="sale-customer" required>
                        <option value="">Select Customer</option>
                    </select>
                    <input type="number" id="sale-quantity" placeholder="Quantity" min="1" required>
                    <select id="sale-discount">
                        <option value="">No Discount</option>
                    </select>
                    <div class="tax-info">
                        <label>Tax Rate: <span id="tax-rate-display">10%</span></label>
                        <div>
                            <label>Subtotal: $<span id="subtotal">0.00</span></label>
                            <label>Discount: $<span id="discount-amount">0.00</span></label>
                            <label>Tax: $<span id="tax-amount">0.00</span></label>
                            <label>Total: $<span id="total-amount">0.00</span></label>
                        </div>
                    </div>
                    <button type="submit">Record Sale</button>
                </form>
                <div id="sales-list"></div>
            </section>

            <!-- Expenses Section -->
            <section id="expenses" class="hidden">
                <h2>Expenses</h2>
                <form id="expense-form">
                    <input type="text" id="expense-desc" placeholder="Description" required>
                    <input type="number" id="expense-amount" placeholder="Amount" step="0.01" required>
                    <select id="expense-category" required>
                        <option value="">Select Category</option>
                        <option value="rent">Rent</option>
                        <option value="utilities">Utilities</option>
                        <option value="supplies">Supplies</option>
                        <option value="marketing">Marketing</option>
                        <option value="payroll">Payroll</option>
                        <option value="insurance">Insurance</option>
                        <option value="maintenance">Maintenance</option>
                        <option value="other">Other</option>
                    </select>
                    <button type="submit">Add Expense</button>
                </form>
                <div id="expenses-list"></div>
            </section>

            <!-- Customers Section -->
            <section id="customers" class="hidden">
                <h2>Customers</h2>
                <form id="customer-form">
                    <input type="text" id="customer-name" placeholder="Customer Name" required>
                    <input type="email" id="customer-email" placeholder="Email">
                    <input type="tel" id="customer-phone" placeholder="Phone">
                    <input type="text" id="customer-address" placeholder="Address">
                    <button type="submit">Add Customer</button>
                </form>
                <div id="customers-list"></div>
            </section>

            <!-- Reports Section -->
            <section id="reports" class="hidden">
                <h2>Reports</h2>
                <div class="report-controls">
                    <select id="report-type">
                        <option value="sales">Sales Report</option>
                        <option value="expenses">Expenses Report</option>
                        <option value="profit-loss">Profit & Loss</option>
                        <option value="inventory">Inventory Report</option>
                        <option value="customers">Customer Report</option>
                        <option value="tax">Tax Report</option>
                    </select>
                    <input type="date" id="report-start">
                    <input type="date" id="report-end">
                    <button id="generate-report">Generate Report</button>
                </div>
                <div class="chart-container">
                    <canvas id="report-chart"></canvas>
                </div>
                <div id="report-table"></div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="hidden">
                <h2>Settings</h2>
                <div class="settings-grid">
                    <div class="settings-card">
                        <h3>Tax Settings</h3>
                        <form id="tax-form">
                            <label>Tax Rate (%):</label>
                            <input type="number" id="tax-rate" min="0" max="100" step="0.01" required>
                            <button type="submit">Update</button>
                        </form>
                    </div>
                    <div class="settings-card">
                        <h3>Inventory Settings</h3>
                        <form id="inventory-form">
                            <label>Default Low Stock Threshold:</label>
                            <input type="number" id="stock-threshold" min="0" required>
                            <button type="submit">Update</button>
                        </form>
                    </div>
                    <div class="settings-card">
                        <h3>User Management</h3>
                        <div id="user-list"></div>
                        <form id="user-role-form">
                            <select id="user-select" required></select>
                            <select id="role-select" required>
                                <option value="cashier">Cashier</option>
                                <option value="manager">Manager</option>
                                <option value="admin">Admin</option>
                            </select>
                            <button type="submit">Update Role</button>
                        </form>
                    </div>
                    <div class="settings-card">
                        <h3>Discount Management</h3>
                        <form id="discount-form">
                            <input type="text" id="discount-name" placeholder="Discount Name" required>
                            <select id="discount-type" required>
                                <option value="percentage">Percentage</option>
                                <option value="fixed">Fixed Amount</option>
                            </select>
                            <input type="number" id="discount-value" placeholder="Value" step="0.01" required>
                            <button type="submit">Add Discount</button>
                        </form>
                        <div id="discounts-list"></div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Navigation -->
        <nav>
            <button data-section="dashboard">Dashboard</button>
            <button data-section="products">Products</button>
            <button data-section="sales">Sales</button>
            <button data-section="expenses">Expenses</button>
            <button data-section="customers">Customers</button>
            <button data-section="reports">Reports</button>
            <button data-section="settings" class="admin-only">Settings</button>
        </nav>
    </div>

    <!-- Receipt Modal -->
    <div id="receipt-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="receipt-content"></div>
            <button id="print-receipt">Print Receipt</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
